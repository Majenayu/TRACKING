<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TrackSmart - Universal Logistics Visibility Platform</title>
    <meta name="description" content="BECKN protocol-based unified logistics tracking platform for real-time visibility across multiple carriers and transport modes in India">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'beckn-blue': '#1E40AF',
                        'beckn-green': '#059669',
                        'beckn-orange': '#EA580C',
                        'indian-saffron': '#FF9933',
                        'indian-green': '#138808',
                        'indian-navy': '#000080'
                    }
                }
            }
        }
    </script>
    <style>
        .pulse-animation {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .tracking-timeline {
            position: relative;
        }
        .tracking-timeline::before {
            content: '';
            position: absolute;
            left: 20px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: #e5e7eb;
        }
        .timeline-item {
            position: relative;
            padding-left: 50px;
            margin-bottom: 20px;
        }
        .timeline-dot {
            position: absolute;
            left: 12px;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            border: 2px solid #e5e7eb;
            background: white;
        }
        .timeline-dot.active {
            background: #059669;
            border-color: #059669;
        }
        .timeline-dot.completed {
            background: #10b981;
            border-color: #10b981;
        }
        .carrier-card {
            border: 2px solid #e5e7eb;
            transition: all 0.3s ease;
        }
        .carrier-card:hover {
            border-color: #1E40AF;
            transform: translateY(-2px);
        }
        .carrier-card.selected {
            border-color: #1E40AF;
            background: #eff6ff;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Header -->
    <header class="bg-gradient-to-r from-indian-saffron to-indian-green text-white shadow-lg">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <svg class="h-8 w-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                    </div>
                    <div class="ml-4">
                        <h1 class="text-xl font-bold">TrackSmart</h1>
                        <p class="text-sm text-orange-100">Universal Logistics Visibility Platform</p>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <span class="text-sm bg-white/20 px-3 py-1 rounded-full">BECKN Protocol</span>
                    <button id="api-docs-btn" class="text-sm hover:text-orange-200 transition-colors">API Docs</button>
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="bg-white shadow-sm border-b">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex space-x-8">
                <button id="nav-track" class="nav-btn active py-4 px-2 text-sm font-medium border-b-2 border-beckn-blue text-beckn-blue">
                    Track Shipments
                </button>
                <button id="nav-carriers" class="nav-btn py-4 px-2 text-sm font-medium border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300">
                    Carrier Network
                </button>
                <button id="nav-analytics" class="nav-btn py-4 px-2 text-sm font-medium border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300">
                    Analytics
                </button>
                <button id="nav-integration" class="nav-btn py-4 px-2 text-sm font-medium border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300">
                    API Integration
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Track Shipments Section -->
        <div id="track-section" class="page-section">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Search Panel -->
                <div class="lg:col-span-2">
                    <div class="bg-white rounded-lg shadow-sm p-6">
                        <h2 class="text-2xl font-bold text-gray-900 mb-6">Track Your Shipments</h2>
                        
                        <!-- Search Input -->
                        <div class="mb-6">
                            <div class="relative">
                                <input type="text" id="tracking-input" 
                                       placeholder="Enter tracking number, AWB, or order ID"
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-beckn-blue focus:border-beckn-blue text-lg">
                                <button id="track-btn" class="absolute right-2 top-2 bg-beckn-blue text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                                    Track
                                </button>
                            </div>
                        </div>

                        <!-- Quick Actions -->
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                            <button class="quick-track-btn p-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors" data-carrier="bluedart">
                                <div class="text-center">
                                    <div class="w-8 h-8 bg-blue-600 rounded-full mx-auto mb-2 flex items-center justify-center">
                                        <span class="text-white text-xs font-bold">BD</span>
                                    </div>
                                    <span class="text-sm text-gray-700">Blue Dart</span>
                                </div>
                            </button>
                            <button class="quick-track-btn p-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors" data-carrier="dtdc">
                                <div class="text-center">
                                    <div class="w-8 h-8 bg-red-600 rounded-full mx-auto mb-2 flex items-center justify-center">
                                        <span class="text-white text-xs font-bold">DT</span>
                                    </div>
                                    <span class="text-sm text-gray-700">DTDC</span>
                                </div>
                            </button>
                            <button class="quick-track-btn p-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors" data-carrier="delhivery">
                                <div class="text-center">
                                    <div class="w-8 h-8 bg-green-600 rounded-full mx-auto mb-2 flex items-center justify-center">
                                        <span class="text-white text-xs font-bold">DL</span>
                                    </div>
                                    <span class="text-sm text-gray-700">Delhivery</span>
                                </div>
                            </button>
                            <button class="quick-track-btn p-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors" data-carrier="ecom">
                                <div class="text-center">
                                    <div class="w-8 h-8 bg-purple-600 rounded-full mx-auto mb-2 flex items-center justify-center">
                                        <span class="text-white text-xs font-bold">EC</span>
                                    </div>
                                    <span class="text-sm text-gray-700">Ecom Express</span>
                                </div>
                            </button>
                        </div>

                        <!-- Tracking Results -->
                        <div id="tracking-results" class="hidden">
                            <div class="border-t pt-6">
                                <div class="flex items-center justify-between mb-4">
                                    <h3 class="text-lg font-semibold text-gray-900">Tracking Results</h3>
                                    <div class="flex items-center space-x-2">
                                        <span class="text-sm text-gray-500">Last updated:</span>
                                        <span id="last-update-time" class="text-sm font-medium text-gray-900">-</span>
                                        <button id="refresh-tracking" class="text-beckn-blue hover:text-blue-700 transition-colors">
                                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                                            </svg>
                                        </button>
                                    </div>
                                </div>

                                <!-- Shipment Info -->
                                <div class="bg-gray-50 rounded-lg p-4 mb-6">
                                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                        <div>
                                            <span class="text-sm text-gray-500">Tracking Number</span>
                                            <p id="shipment-number" class="font-mono text-lg font-semibold text-gray-900">-</p>
                                        </div>
                                        <div>
                                            <span class="text-sm text-gray-500">Carrier</span>
                                            <p id="shipment-carrier" class="text-lg font-semibold text-gray-900">-</p>
                                        </div>
                                        <div>
                                            <span class="text-sm text-gray-500">Status</span>
                                            <p id="shipment-status" class="text-lg font-semibold">-</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Tracking Timeline -->
                                <div class="tracking-timeline">
                                    <div id="tracking-events" class="space-y-4">
                                        <!-- Events will be populated here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Stats Panel -->
                <div class="space-y-6">
                    <!-- Quick Stats -->
                    <div class="bg-white rounded-lg shadow-sm p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">Today's Overview</h3>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-gray-600">Total Shipments</span>
                                <span class="text-2xl font-bold text-beckn-blue">2,847</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-gray-600">In Transit</span>
                                <span class="text-2xl font-bold text-beckn-orange">1,256</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-gray-600">Delivered</span>
                                <span class="text-2xl font-bold text-beckn-green">1,423</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-gray-600">Pending</span>
                                <span class="text-2xl font-bold text-red-600">168</span>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Alerts -->
                    <div class="bg-white rounded-lg shadow-sm p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">Recent Alerts</h3>
                        <div class="space-y-3">
                            <div class="p-3 bg-red-50 border border-red-200 rounded-lg">
                                <div class="flex items-center">
                                    <div class="w-2 h-2 bg-red-500 rounded-full mr-3"></div>
                                    <div>
                                        <p class="text-sm font-medium text-red-800">Delayed Shipment</p>
                                        <p class="text-xs text-red-600">AWB123456789 - 2 hours delay</p>
                                    </div>
                                </div>
                            </div>
                            <div class="p-3 bg-yellow-50 border border-yellow-200 rounded-lg">
                                <div class="flex items-center">
                                    <div class="w-2 h-2 bg-yellow-500 rounded-full mr-3"></div>
                                    <div>
                                        <p class="text-sm font-medium text-yellow-800">Route Change</p>
                                        <p class="text-xs text-yellow-600">DL987654321 - New route via Delhi</p>
                                    </div>
                                </div>
                            </div>
                            <div class="p-3 bg-green-50 border border-green-200 rounded-lg">
                                <div class="flex items-center">
                                    <div class="w-2 h-2 bg-green-500 rounded-full mr-3"></div>
                                    <div>
                                        <p class="text-sm font-medium text-green-800">Out for Delivery</p>
                                        <p class="text-xs text-green-600">BD555444333 - Expected by 6 PM</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Carrier Network Section -->
        <div id="carriers-section" class="page-section hidden">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div class="bg-white rounded-lg shadow-sm p-6">
                    <h2 class="text-2xl font-bold text-gray-900 mb-6">Registered Carriers</h2>
                    <div class="space-y-4">
                        <div class="carrier-card p-4 rounded-lg">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <div class="w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center">
                                        <span class="text-white font-bold">BD</span>
                                    </div>
                                    <div class="ml-4">
                                        <h3 class="font-semibold text-gray-900">Blue Dart Express</h3>
                                        <p class="text-sm text-gray-600">Pan-India Express Delivery</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="text-green-600 font-semibold">Active</div>
                                    <div class="text-sm text-gray-500">API v2.1</div>
                                </div>
                            </div>
                        </div>
                        <div class="carrier-card p-4 rounded-lg">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <div class="w-12 h-12 bg-green-600 rounded-full flex items-center justify-center">
                                        <span class="text-white font-bold">DL</span>
                                    </div>
                                    <div class="ml-4">
                                        <h3 class="font-semibold text-gray-900">Delhivery</h3>
                                        <p class="text-sm text-gray-600">E-commerce Logistics</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="text-green-600 font-semibold">Active</div>
                                    <div class="text-sm text-gray-500">API v1.8</div>
                                </div>
                            </div>
                        </div>
                        <div class="carrier-card p-4 rounded-lg">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <div class="w-12 h-12 bg-red-600 rounded-full flex items-center justify-center">
                                        <span class="text-white font-bold">DT</span>
                                    </div>
                                    <div class="ml-4">
                                        <h3 class="font-semibold text-gray-900">DTDC</h3>
                                        <p class="text-sm text-gray-600">Document & Parcel Service</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="text-green-600 font-semibold">Active</div>
                                    <div class="text-sm text-gray-500">API v1.5</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-sm p-6">
                    <h2 class="text-2xl font-bold text-gray-900 mb-6">Network Coverage</h2>
                    <div class="space-y-6">
                        <div>
                            <h3 class="font-semibold text-gray-900 mb-3">Tier-1 Cities</h3>
                            <div class="grid grid-cols-3 gap-2">
                                <div class="text-center p-2 bg-green-50 rounded border">
                                    <div class="text-2xl font-bold text-green-600">12</div>
                                    <div class="text-xs text-gray-600">Cities</div>
                                </div>
                                <div class="text-center p-2 bg-blue-50 rounded border">
                                    <div class="text-2xl font-bold text-blue-600">98%</div>
                                    <div class="text-xs text-gray-600">Coverage</div>
                                </div>
                                <div class="text-center p-2 bg-purple-50 rounded border">
                                    <div class="text-2xl font-bold text-purple-600">24h</div>
                                    <div class="text-xs text-gray-600">Avg Time</div>
                                </div>
                            </div>
                        </div>
                        <div>
                            <h3 class="font-semibold text-gray-900 mb-3">Tier-2 Cities</h3>
                            <div class="grid grid-cols-3 gap-2">
                                <div class="text-center p-2 bg-green-50 rounded border">
                                    <div class="text-2xl font-bold text-green-600">87</div>
                                    <div class="text-xs text-gray-600">Cities</div>
                                </div>
                                <div class="text-center p-2 bg-blue-50 rounded border">
                                    <div class="text-2xl font-bold text-blue-600">94%</div>
                                    <div class="text-xs text-gray-600">Coverage</div>
                                </div>
                                <div class="text-center p-2 bg-purple-50 rounded border">
                                    <div class="text-2xl font-bold text-purple-600">48h</div>
                                    <div class="text-xs text-gray-600">Avg Time</div>
                                </div>
                            </div>
                        </div>
                        <div>
                            <h3 class="font-semibold text-gray-900 mb-3">Tier-3 Cities</h3>
                            <div class="grid grid-cols-3 gap-2">
                                <div class="text-center p-2 bg-green-50 rounded border">
                                    <div class="text-2xl font-bold text-green-600">156</div>
                                    <div class="text-xs text-gray-600">Cities</div>
                                </div>
                                <div class="text-center p-2 bg-blue-50 rounded border">
                                    <div class="text-2xl font-bold text-blue-600">78%</div>
                                    <div class="text-xs text-gray-600">Coverage</div>
                                </div>
                                <div class="text-center p-2 bg-purple-50 rounded border">
                                    <div class="text-2xl font-bold text-purple-600">72h</div>
                                    <div class="text-xs text-gray-600">Avg Time</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Analytics Section -->
        <div id="analytics-section" class="page-section hidden">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <div class="lg:col-span-2 space-y-6">
                    <div class="bg-white rounded-lg shadow-sm p-6">
                        <h2 class="text-2xl font-bold text-gray-900 mb-6">Performance Analytics</h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="text-center p-4 bg-blue-50 rounded-lg">
                                <div class="text-3xl font-bold text-blue-600">99.2%</div>
                                <div class="text-sm text-gray-600">Delivery Success Rate</div>
                            </div>
                            <div class="text-center p-4 bg-green-50 rounded-lg">
                                <div class="text-3xl font-bold text-green-600">2.1h</div>
                                <div class="text-sm text-gray-600">Average Tracking Update</div>
                            </div>
                            <div class="text-center p-4 bg-purple-50 rounded-lg">
                                <div class="text-3xl font-bold text-purple-600">97%</div>
                                <div class="text-sm text-gray-600">API Uptime</div>
                            </div>
                            <div class="text-center p-4 bg-orange-50 rounded-lg">
                                <div class="text-3xl font-bold text-orange-600">1.8s</div>
                                <div class="text-sm text-gray-600">Average Response Time</div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg shadow-sm p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">Regional Performance</h3>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between p-3 bg-gray-50 rounded">
                                <span class="font-medium">North India</span>
                                <div class="flex items-center">
                                    <div class="w-32 bg-gray-200 rounded-full h-2 mr-3">
                                        <div class="bg-green-600 h-2 rounded-full" style="width: 95%"></div>
                                    </div>
                                    <span class="text-sm text-gray-600">95%</span>
                                </div>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-gray-50 rounded">
                                <span class="font-medium">South India</span>
                                <div class="flex items-center">
                                    <div class="w-32 bg-gray-200 rounded-full h-2 mr-3">
                                        <div class="bg-green-600 h-2 rounded-full" style="width: 98%"></div>
                                    </div>
                                    <span class="text-sm text-gray-600">98%</span>
                                </div>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-gray-50 rounded">
                                <span class="font-medium">East India</span>
                                <div class="flex items-center">
                                    <div class="w-32 bg-gray-200 rounded-full h-2 mr-3">
                                        <div class="bg-yellow-600 h-2 rounded-full" style="width: 87%"></div>
                                    </div>
                                    <span class="text-sm text-gray-600">87%</span>
                                </div>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-gray-50 rounded">
                                <span class="font-medium">West India</span>
                                <div class="flex items-center">
                                    <div class="w-32 bg-gray-200 rounded-full h-2 mr-3">
                                        <div class="bg-green-600 h-2 rounded-full" style="width: 92%"></div>
                                    </div>
                                    <span class="text-sm text-gray-600">92%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="space-y-6">
                    <div class="bg-white rounded-lg shadow-sm p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">Top Routes</h3>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-gray-600">Mumbai → Delhi</span>
                                <span class="font-semibold">2,847</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-gray-600">Bangalore → Chennai</span>
                                <span class="font-semibold">1,923</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-gray-600">Delhi → Kolkata</span>
                                <span class="font-semibold">1,456</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-gray-600">Hyderabad → Mumbai</span>
                                <span class="font-semibold">1,234</span>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg shadow-sm p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">Carrier Performance</h3>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-gray-600">Blue Dart</span>
                                <span class="font-semibold text-green-600">98.5%</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-gray-600">Delhivery</span>
                                <span class="font-semibold text-green-600">96.2%</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-gray-600">DTDC</span>
                                <span class="font-semibold text-yellow-600">94.1%</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-gray-600">Ecom Express</span>
                                <span class="font-semibold text-green-600">97.8%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- API Integration Section -->
        <div id="integration-section" class="page-section hidden">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div class="bg-white rounded-lg shadow-sm p-6">
                    <h2 class="text-2xl font-bold text-gray-900 mb-6">BECKN Protocol Integration</h2>
                    <div class="space-y-4">
                        <div class="p-4 bg-blue-50 rounded-lg">
                            <h3 class="font-semibold text-blue-900 mb-2">Discovery API</h3>
                            <p class="text-sm text-blue-800">Find logistics providers and services</p>
                            <code class="text-xs bg-blue-100 px-2 py-1 rounded mt-2 block">POST /api/v1/search</code>
                        </div>
                        <div class="p-4 bg-green-50 rounded-lg">
                            <h3 class="font-semibold text-green-900 mb-2">Order API</h3>
                            <p class="text-sm text-green-800">Create and manage shipment orders</p>
                            <code class="text-xs bg-green-100 px-2 py-1 rounded mt-2 block">POST /api/v1/init</code>
                        </div>
                        <div class="p-4 bg-purple-50 rounded-lg">
                            <h3 class="font-semibold text-purple-900 mb-2">Track API</h3>
                            <p class="text-sm text-purple-800">Real-time tracking and updates</p>
                            <code class="text-xs bg-purple-100 px-2 py-1 rounded mt-2 block">GET /api/v1/track/{id}</code>
                        </div>
                    </div>

                    <div class="mt-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">API Documentation</h3>
                        <div class="space-y-2">
                            <a href="#" class="block p-3 border rounded-lg hover:bg-gray-50 transition-colors">
                                <div class="flex items-center justify-between">
                                    <span class="font-medium">Getting Started Guide</span>
                                    <span class="text-sm text-gray-500">PDF</span>
                                </div>
                            </a>
                            <a href="#" class="block p-3 border rounded-lg hover:bg-gray-50 transition-colors">
                                <div class="flex items-center justify-between">
                                    <span class="font-medium">API Reference</span>
                                    <span class="text-sm text-gray-500">Interactive</span>
                                </div>
                            </a>
                            <a href="#" class="block p-3 border rounded-lg hover:bg-gray-50 transition-colors">
                                <div class="flex items-center justify-between">
                                    <span class="font-medium">Code Examples</span>
                                    <span class="text-sm text-gray-500">GitHub</span>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-sm p-6">
                    <h2 class="text-2xl font-bold text-gray-900 mb-6">Sample Integration</h2>
                    <div class="space-y-4">
                        <div>
                            <h3 class="font-semibold text-gray-900 mb-2">Track Shipment</h3>
                            <div class="bg-gray-900 rounded-lg p-4 text-sm">
                                <pre class="text-green-400"><code>curl -X GET \
  'https://api.tracksmart.in/v1/track/AWB123456789' \
  -H 'Authorization: Bearer YOUR_API_KEY' \
  -H 'Content-Type: application/json'</code></pre>
                            </div>
                        </div>
                        <div>
                            <h3 class="font-semibold text-gray-900 mb-2">Response</h3>
                            <div class="bg-gray-900 rounded-lg p-4 text-sm">
                                <pre class="text-blue-400"><code>{
  "tracking_number": "AWB123456789",
  "status": "in_transit",
  "carrier": "Blue Dart",
  "current_location": "Mumbai",
  "destination": "Delhi",
  "estimated_delivery": "2024-01-15T18:00:00Z",
  "events": [
    {
      "timestamp": "2024-01-14T10:30:00Z",
      "status": "picked_up",
      "location": "Mumbai"
    }
  ]
}</code></pre>
                            </div>
                        </div>
                        <div>
                            <h3 class="font-semibold text-gray-900 mb-2">SDKs Available</h3>
                            <div class="grid grid-cols-2 gap-3">
                                <div class="p-3 border rounded-lg text-center">
                                    <div class="font-semibold">Node.js</div>
                                    <div class="text-sm text-gray-600">npm install tracksmart-sdk</div>
                                </div>
                                <div class="p-3 border rounded-lg text-center">
                                    <div class="font-semibold">Python</div>
                                    <div class="text-sm text-gray-600">pip install tracksmart</div>
                                </div>
                                <div class="p-3 border rounded-lg text-center">
                                    <div class="font-semibold">PHP</div>
                                    <div class="text-sm text-gray-600">composer install tracksmart</div>
                                </div>
                                <div class="p-3 border rounded-lg text-center">
                                    <div class="font-semibold">Java</div>
                                    <div class="text-sm text-gray-600">Maven dependency</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Notification Toast -->
    <div id="notification" class="fixed top-4 right-4 bg-green-600 text-white px-6 py-3 rounded-lg shadow-lg hidden">
        <div class="flex items-center">
            <span id="notification-text"></span>
            <button onclick="hideNotification()" class="ml-4 text-white hover:text-gray-200">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
        </div>
    </div>

    <script>
        // Global variables
        let currentSection = 'track';
        let trackingData = {};
        let demoShipments = [
            {
                id: 'AWB123456789',
                carrier: 'Blue Dart Express',
                status: 'In Transit',
                origin: 'Mumbai',
                destination: 'Delhi',
                estimatedDelivery: '2024-01-15T18:00:00Z',
                events: [
                    { time: '2024-01-14T10:30:00Z', status: 'Picked up', location: 'Mumbai Hub', description: 'Package collected from sender' },
                    { time: '2024-01-14T14:15:00Z', status: 'In Transit', location: 'Mumbai Sorting Center', description: 'Package sorted and dispatched' },
                    { time: '2024-01-14T20:45:00Z', status: 'In Transit', location: 'Pune Hub', description: 'Package in transit to Delhi' },
                    { time: '2024-01-15T08:30:00Z', status: 'In Transit', location: 'Delhi Hub', description: 'Package arrived at destination city' }
                ]
            },
            {
                id: 'DL987654321',
                carrier: 'Delhivery',
                status: 'Out for Delivery',
                origin: 'Bangalore',
                destination: 'Chennai',
                estimatedDelivery: '2024-01-14T17:00:00Z',
                events: [
                    { time: '2024-01-13T09:00:00Z', status: 'Picked up', location: 'Bangalore Hub', description: 'Package collected from merchant' },
                    { time: '2024-01-13T18:30:00Z', status: 'In Transit', location: 'Bangalore Sorting Center', description: 'Package processed and dispatched' },
                    { time: '2024-01-14T06:00:00Z', status: 'In Transit', location: 'Chennai Hub', description: 'Package arrived at destination hub' },
                    { time: '2024-01-14T10:30:00Z', status: 'Out for Delivery', location: 'Chennai Delivery Center', description: 'Package out for delivery' }
                ]
            }
        ];

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            setupNavigation();
            setupTrackingInterface();
            showNotification('Welcome to TrackSmart! Track your shipments across multiple carriers.', 'success');
        });

        // Navigation functionality
        function setupNavigation() {
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const section = this.id.replace('nav-', '');
                    switchSection(section);
                });
            });
        }

        function switchSection(section) {
            // Hide all sections
            document.querySelectorAll('.page-section').forEach(sec => {
                sec.classList.add('hidden');
            });

            // Show selected section
            const targetSection = document.getElementById(section + '-section');
            if (targetSection) {
                targetSection.classList.remove('hidden');
            }

            // Update navigation buttons
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active', 'border-beckn-blue', 'text-beckn-blue');
                btn.classList.add('border-transparent', 'text-gray-500');
            });

            const activeBtn = document.getElementById('nav-' + section);
            if (activeBtn) {
                activeBtn.classList.remove('border-transparent', 'text-gray-500');
                activeBtn.classList.add('active', 'border-beckn-blue', 'text-beckn-blue');
            }

            currentSection = section;
        }

        // Tracking interface setup
        function setupTrackingInterface() {
            const trackBtn = document.getElementById('track-btn');
            const trackInput = document.getElementById('tracking-input');
            const refreshBtn = document.getElementById('refresh-tracking');

            if (trackBtn) {
                trackBtn.addEventListener('click', function() {
                    const trackingNumber = trackInput.value.trim();
                    if (trackingNumber) {
                        trackShipment(trackingNumber);
                    } else {
                        showNotification('Please enter a tracking number', 'error');
                    }
                });
            }

            if (trackInput) {
                trackInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        trackBtn.click();
                    }
                });
            }

            if (refreshBtn) {
                refreshBtn.addEventListener('click', function() {
                    const currentTrackingNumber = document.getElementById('shipment-number').textContent;
                    if (currentTrackingNumber && currentTrackingNumber !== '-') {
                        trackShipment(currentTrackingNumber);
                    }
                });
            }

            // Quick track buttons
            document.querySelectorAll('.quick-track-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const carrier = this.dataset.carrier;
                    showCarrierInfo(carrier);
                });
            });
        }

        function trackShipment(trackingNumber) {
            showNotification('Tracking shipment...', 'info');
            
            // Simulate API call delay
            setTimeout(() => {
                const shipment = findShipmentByTrackingNumber(trackingNumber);
                
                if (shipment) {
                    displayTrackingResults(shipment);
                    showNotification('Shipment found successfully!', 'success');
                } else {
                    // Show demo data for any tracking number
                    const demoShipment = demoShipments[Math.floor(Math.random() * demoShipments.length)];
                    demoShipment.id = trackingNumber;
                    displayTrackingResults(demoShipment);
                    showNotification('Shipment tracked successfully!', 'success');
                }
            }, 1000);
        }

        function findShipmentByTrackingNumber(trackingNumber) {
            return demoShipments.find(shipment => shipment.id === trackingNumber);
        }

        function displayTrackingResults(shipment) {
            // Update shipment info
            document.getElementById('shipment-number').textContent = shipment.id;
            document.getElementById('shipment-carrier').textContent = shipment.carrier;
            document.getElementById('shipment-status').textContent = shipment.status;
            
            // Set status color
            const statusElement = document.getElementById('shipment-status');
            const statusColors = {
                'Picked up': 'text-blue-600',
                'In Transit': 'text-yellow-600',
                'Out for Delivery': 'text-orange-600',
                'Delivered': 'text-green-600',
                'Exception': 'text-red-600'
            };
            statusElement.className = `text-lg font-semibold ${statusColors[shipment.status] || 'text-gray-600'}`;

            // Update timeline
            const eventsContainer = document.getElementById('tracking-events');
            eventsContainer.innerHTML = '';
            
            shipment.events.forEach((event, index) => {
                const eventElement = document.createElement('div');
                eventElement.className = 'timeline-item';
                
                const isLatest = index === shipment.events.length - 1;
                const dotClass = isLatest ? 'timeline-dot active' : 'timeline-dot completed';
                
                eventElement.innerHTML = `
                    <div class="${dotClass}"></div>
                    <div class="bg-white p-4 rounded-lg shadow-sm">
                        <div class="flex items-center justify-between mb-2">
                            <h4 class="font-semibold text-gray-900">${event.status}</h4>
                            <span class="text-sm text-gray-500">${formatDateTime(event.time)}</span>
                        </div>
                        <p class="text-sm text-gray-600 mb-1">${event.location}</p>
                        <p class="text-sm text-gray-500">${event.description}</p>
                    </div>
                `;
                
                eventsContainer.appendChild(eventElement);
            });

            // Update last update time
            document.getElementById('last-update-time').textContent = formatDateTime(new Date().toISOString());

            // Show results
            document.getElementById('tracking-results').classList.remove('hidden');
        }

        function showCarrierInfo(carrier) {
            const carrierNames = {
                'bluedart': 'Blue Dart Express',
                'delhivery': 'Delhivery',
                'dtdc': 'DTDC',
                'ecom': 'Ecom Express'
            };
            
            showNotification(`Switched to ${carrierNames[carrier]} tracking`, 'info');
            
            // Pre-fill tracking input with demo tracking number
            const demoNumbers = {
                'bluedart': 'BD123456789',
                'delhivery': 'DL987654321',
                'dtdc': 'DT456789123',
                'ecom': 'EC789123456'
            };
            
            document.getElementById('tracking-input').value = demoNumbers[carrier];
        }

        function formatDateTime(dateString) {
            const date = new Date(dateString);
            return date.toLocaleString('en-IN', {
                year: 'numeric',
                month: 'short',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
        }

        // Notification system
        function showNotification(message, type = 'info') {
            const notification = document.getElementById('notification');
            const notificationText = document.getElementById('notification-text');
            
            notificationText.textContent = message;
            
            // Set notification color based on type
            const colors = {
                'success': 'bg-green-600',
                'error': 'bg-red-600',
                'info': 'bg-blue-600',
                'warning': 'bg-yellow-600'
            };
            
            notification.className = `fixed top-4 right-4 text-white px-6 py-3 rounded-lg shadow-lg ${colors[type]}`;
            notification.classList.remove('hidden');
            
            // Auto-hide after 5 seconds
            setTimeout(() => {
                hideNotification();
            }, 5000);
        }

        function hideNotification() {
            const notification = document.getElementById('notification');
            notification.classList.add('hidden');
        }

        // BECKN Protocol simulation
        function simulateBECKNSearch() {
            return {
                providers: [
                    { name: 'Blue Dart Express', service_types: ['express', 'standard'], coverage: 'pan-india' },
                    { name: 'Delhivery', service_types: ['ecommerce', 'cod'], coverage: 'tier-1-2-3' },
                    { name: 'DTDC', service_types: ['document', 'parcel'], coverage: 'pan-india' },
                    { name: 'Ecom Express', service_types: ['ecommerce', 'reverse'], coverage: 'tier-1-2' }
                ]
            };
        }

        function simulateBECKNTrack(trackingId) {
            return {
                tracking_id: trackingId,
                status: 'in_transit',
                location: 'Mumbai',
                estimated_delivery: '2024-01-15T18:00:00Z',
                events: [
                    { timestamp: '2024-01-14T10:30:00Z', status: 'picked_up', location: 'Mumbai' }
                ]
            };
        }

        // API Documentation modal (placeholder)
        document.getElementById('api-docs-btn').addEventListener('click', function() {
            showNotification('API Documentation will open in a new tab', 'info');
        });

        // Initialize demo data on page load
        setTimeout(() => {
            updateDashboardStats();
        }, 1000);

        function updateDashboardStats() {
            // Simulate real-time updates to dashboard numbers
            const stats = {
                total: Math.floor(Math.random() * 100) + 2800,
                transit: Math.floor(Math.random() * 50) + 1200,
                delivered: Math.floor(Math.random() * 100) + 1400,
                pending: Math.floor(Math.random() * 20) + 150
            };

            // Update stats if elements exist
            const elements = document.querySelectorAll('[class*="text-2xl font-bold"]');
            if (elements.length >= 4) {
                elements[0].textContent = stats.total.toLocaleString();
                elements[1].textContent = stats.transit.toLocaleString();
                elements[2].textContent = stats.delivered.toLocaleString();
                elements[3].textContent = stats.pending.toLocaleString();
            }
        }

        // Sender interface setup
        function setupSenderInterface() {
            document.getElementById('generate-keys').addEventListener('click', generateKeys);
            document.getElementById('start-sharing').addEventListener('click', startLocationSharing);
            document.getElementById('stop-sharing').addEventListener('click', stopLocationSharing);
        }

        async function generateKeys() {
            try {
                showNotification('Generating RSA keys...', 'info');
                
                // Generate RSA key pair
                const crypt = new JSEncrypt({default_key_size: 2048});
                crypt.getKey();
                
                senderKeys = {
                    public: crypt.getPublicKey(),
                    private: crypt.getPrivateKey()
                };
                
                // Generate unique sender ID
                senderId = 'sender_' + Math.random().toString(36).substr(2, 9);
                
                // Store keys on server
                const response = await fetch('/api/keys', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        senderId: senderId,
                        publicKey: senderKeys.public,
                        privateKey: senderKeys.private
                    })
                });
                
                if (response.ok) {
                    // Show sender ID
                    document.getElementById('sender-id').textContent = senderId;
                    document.getElementById('sender-id-display').classList.remove('hidden');
                    document.getElementById('start-sharing').disabled = false;
                    
                    showNotification('Keys generated successfully! Share your Sender ID with the receiver.', 'success');
                } else {
                    throw new Error('Failed to store keys');
                }
                
            } catch (error) {
                console.error('Error generating keys:', error);
                showNotification('Failed to generate keys. Please try again.', 'error');
            }
        }

        async function startLocationSharing() {
            if (!senderKeys || !senderId) {
                showNotification('Please generate keys first', 'error');
                return;
            }

            try {
                // Request location permission
                const position = await getCurrentPosition();
                
                isSharing = true;
                document.getElementById('start-sharing').classList.add('hidden');
                document.getElementById('stop-sharing').classList.remove('hidden');
                document.getElementById('sharing-status').classList.remove('hidden');
                document.getElementById('location-info').classList.remove('hidden');
                
                // Start sharing location every 2 seconds
                sharingInterval = setInterval(shareLocation, 2000);
                shareLocation(); // Share immediately
                
                showNotification('Started sharing location securely', 'success');
                
            } catch (error) {
                console.error('Error starting location sharing:', error);
                showNotification('Failed to access location. Please enable location services.', 'error');
            }
        }

        async function shareLocation() {
            try {
                const position = await getCurrentPosition();
                const { latitude, longitude, accuracy } = position.coords;
                
                // Update UI
                document.getElementById('current-lat').textContent = latitude.toFixed(6);
                document.getElementById('current-lng').textContent = longitude.toFixed(6);
                document.getElementById('current-accuracy').textContent = accuracy.toFixed(0);
                document.getElementById('last-updated').textContent = new Date().toLocaleTimeString();
                
                // Encrypt location data
                const locationData = JSON.stringify({
                    latitude: latitude,
                    longitude: longitude,
                    accuracy: accuracy,
                    timestamp: Date.now()
                });
                
                const crypt = new JSEncrypt();
                crypt.setPublicKey(senderKeys.public);
                const encryptedData = crypt.encrypt(locationData);
                
                // Send to server
                const response = await fetch('/api/location', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        senderId: senderId,
                        encryptedData: encryptedData,
                        publicKey: senderKeys.public,
                        timestamp: Date.now()
                    })
                });
                
                if (!response.ok) {
                    throw new Error('Failed to share location');
                }
                
            } catch (error) {
                console.error('Error sharing location:', error);
                showNotification('Failed to share location', 'error');
            }
        }

        function stopLocationSharing() {
            isSharing = false;
            if (sharingInterval) {
                clearInterval(sharingInterval);
                sharingInterval = null;
            }
            
            document.getElementById('start-sharing').classList.remove('hidden');
            document.getElementById('stop-sharing').classList.add('hidden');
            document.getElementById('sharing-status').classList.add('hidden');
            
            showNotification('Stopped sharing location', 'info');
        }

        // Receiver interface setup
        function setupReceiverInterface() {
            document.getElementById('start-tracking').addEventListener('click', startTracking);
            document.getElementById('stop-tracking').addEventListener('click', stopTracking);
        }

        async function startTracking() {
            const inputSenderId = document.getElementById('receiver-sender-id').value.trim();
            
            if (!inputSenderId) {
                showNotification('Please enter a sender ID', 'error');
                return;
            }
            
            try {
                // Get receiver's location
                const receiverPosition = await getCurrentPosition();
                
                isTracking = true;
                document.getElementById('start-tracking').classList.add('hidden');
                document.getElementById('stop-tracking').classList.remove('hidden');
                document.getElementById('distance-display').classList.remove('hidden');
                document.getElementById('tracking-info').classList.remove('hidden');
                
                // Initialize map
                if (!mapInitialized) {
                    initializeMap();
                }
                
                // Start tracking every 2 seconds
                trackingInterval = setInterval(() => trackLocation(inputSenderId, receiverPosition), 2000);
                trackLocation(inputSenderId, receiverPosition); // Track immediately
                
                showNotification('Started tracking location', 'success');
                
            } catch (error) {
                console.error('Error starting tracking:', error);
                showNotification('Failed to start tracking. Please check sender ID and try again.', 'error');
            }
        }

        async function trackLocation(senderId, receiverPosition) {
            try {
                // Get current receiver position
                const currentReceiverPos = await getCurrentPosition();
                
                // Fetch sender's encrypted location
                const response = await fetch(`/api/location/${senderId}`);
                if (!response.ok) {
                    throw new Error('Sender not found or not sharing location');
                }
                
                const data = await response.json();
                
                // Get sender's private key for decryption
                const keysResponse = await fetch(`/api/keys/${senderId}`);
                if (!keysResponse.ok) {
                    throw new Error('Keys not found');
                }
                
                const keysData = await keysResponse.json();
                
                // Decrypt location data
                const crypt = new JSEncrypt();
                crypt.setPrivateKey(keysData.privateKey);
                const decryptedData = crypt.decrypt(data.encryptedData);
                
                if (!decryptedData) {
                    throw new Error('Failed to decrypt location data');
                }
                
                const senderLocation = JSON.parse(decryptedData);
                
                // Calculate distance
                const distance = calculateDistance(
                    currentReceiverPos.coords.latitude,
                    currentReceiverPos.coords.longitude,
                    senderLocation.latitude,
                    senderLocation.longitude
                );
                
                // Update UI
                document.getElementById('distance-value').textContent = Math.round(distance);
                document.getElementById('sender-lat').textContent = senderLocation.latitude.toFixed(6);
                document.getElementById('sender-lng').textContent = senderLocation.longitude.toFixed(6);
                document.getElementById('receiver-lat').textContent = currentReceiverPos.coords.latitude.toFixed(6);
                document.getElementById('receiver-lng').textContent = currentReceiverPos.coords.longitude.toFixed(6);
                document.getElementById('tracking-updated').textContent = new Date().toLocaleTimeString();
                
                // Proximity alert
                if (distance <= 1000) {
                    document.getElementById('proximity-alert').classList.remove('hidden');
                } else {
                    document.getElementById('proximity-alert').classList.add('hidden');
                }
                
                // Update map
                if (hereMap) {
                    updateMap(senderLocation, currentReceiverPos.coords);
                }
                
            } catch (error) {
                console.error('Error tracking location:', error);
                showNotification('Failed to track location. Sender may not be sharing.', 'error');
            }
        }

        function stopTracking() {
            isTracking = false;
            if (trackingInterval) {
                clearInterval(trackingInterval);
                trackingInterval = null;
            }
            
            document.getElementById('start-tracking').classList.remove('hidden');
            document.getElementById('stop-tracking').classList.add('hidden');
            document.getElementById('distance-display').classList.add('hidden');
            document.getElementById('proximity-alert').classList.add('hidden');
            document.getElementById('map-container').classList.add('hidden');
            
            showNotification('Stopped tracking location', 'info');
        }

        // HERE Maps functionality
        function initializeMap() {
            // Note: This is a demo implementation. In production, you'd need a valid HERE API key
            document.getElementById('map-container').classList.remove('hidden');
            document.getElementById('here-map').innerHTML = `
                <div class="w-full h-64 bg-gray-200 flex items-center justify-center">
                    <div class="text-center">
                        <div class="text-gray-600 mb-2">📍 Interactive Map</div>
                        <div class="text-sm text-gray-500">HERE Maps integration</div>
                        <div class="text-xs text-gray-400 mt-1">Configure HERE_API_KEY for full functionality</div>
                    </div>
                </div>
            `;
            mapInitialized = true;
        }

        function updateMap(senderLocation, receiverLocation) {
            // This would update the HERE map with both locations
            // For now, just show that the map is being updated
            const mapDiv = document.getElementById('here-map');
            if (mapDiv) {
                const distance = calculateDistance(
                    receiverLocation.latitude,
                    receiverLocation.longitude,
                    senderLocation.latitude,
                    senderLocation.longitude
                );
                
                mapDiv.innerHTML = `
                    <div class="w-full h-64 bg-blue-50 flex items-center justify-center">
                        <div class="text-center">
                            <div class="text-blue-600 mb-2">📍 Live Tracking</div>
                            <div class="text-sm text-gray-700">Distance: ${Math.round(distance)}m</div>
                            <div class="text-xs text-gray-500 mt-1">Sender: ${senderLocation.latitude.toFixed(4)}, ${senderLocation.longitude.toFixed(4)}</div>
                            <div class="text-xs text-gray-500">You: ${receiverLocation.latitude.toFixed(4)}, ${receiverLocation.longitude.toFixed(4)}</div>
                        </div>
                    </div>
                `;
            }
        }

        // Utility functions
        function getCurrentPosition() {
            return new Promise((resolve, reject) => {
                navigator.geolocation.getCurrentPosition(resolve, reject, {
                    enableHighAccuracy: true,
                    timeout: 10000,
                    maximumAge: 0
                });
            });
        }

        function calculateDistance(lat1, lon1, lat2, lon2) {
            const R = 6371000; // Earth's radius in meters
            const dLat = (lat2 - lat1) * Math.PI / 180;
            const dLon = (lon2 - lon1) * Math.PI / 180;
            const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                    Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
                    Math.sin(dLon/2) * Math.sin(dLon/2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
            return R * c;
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            const colors = {
                info: 'bg-blue-500',
                success: 'bg-green-500',
                error: 'bg-red-500',
                warning: 'bg-yellow-500'
            };
            
            notification.className = `${colors[type]} text-white px-4 py-2 rounded-lg shadow-lg mb-2 transition-all duration-300`;
            notification.textContent = message;
            
            document.getElementById('notifications').appendChild(notification);
            
            // Remove notification after 5 seconds
            setTimeout(() => {
                notification.remove();
            }, 5000);
        }

        // Cleanup on page unload
        window.addEventListener('beforeunload', () => {
            if (isSharing) {
                stopLocationSharing();
            }
            if (isTracking) {
                stopTracking();
            }
        });
    </script>
</body>
</html>